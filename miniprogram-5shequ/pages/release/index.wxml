<!-- 发布页顶部导航栏 -->
<t-navbar title="发布动态" left-arrow />
<view class="page">
  <!-- 发布主容器 -->
  <view class="release-container">
    <!-- 图片上传区 -->
    <view class="upload box">
      <t-upload t-class="upload-class" media-type="{{['image']}}" files="{{originFiles}}" gridConfig="{{gridConfig}}" bind:success="handleSuccess" bind:remove="handleRemove" max="4" />
    </view>
    <!-- 描述输入区 -->
    <view class="desc box">
      <view class="desc-label">添加描述</view>
      <t-textarea t-class="desc-class" t-class-textarea="placeholder-class" placeholder="分享你此刻的想法" maxlength="500" disableDefaultPadding="{{true}}" indicator bind:change="onDescInput" value="{{desc}}" />
    </view>
    <!-- 标签选择区 -->
    <view class="taggroup box">
      <t-cell t-class-title="cell-title-class" t-class-note="cell-note-class" title="添加标签">
        <!-- 标签多选组件，循环渲染 -->
        <block wx:for="{{tags}}" wx:key="index">
          <t-check-tag t-class="tag-class{{selectedTags.includes(item) ? ' tag-class-checked' : ''}}" size="medium" variant="dark" content="#{{item}}" slot="note" bind:tap="onTagTap" data-value="{{item}}" checked="{{selectedTags.includes(item)}}" />
        </block>
      </t-cell>
    </view>
    <!-- 定位选择区 -->
    <view class="location box">
      <t-cell title="所在位置" hover arrow leftIcon="location" bindtap="gotoMap" />
    </view>
    <!-- 操作按钮区 -->
    <view class="btngroup box">
      <t-button t-class="btn-class" theme="light" icon="file-copy" content="存草稿" size="large" bindtap="saveDraft"></t-button>
      <t-button t-class="btn-class" theme="primary" icon="upload" content="发布" size="large" bindtap="release"></t-button>
    </view>
  </view>
</view>